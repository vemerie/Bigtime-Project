{"ast":null,"code":"\"use strict\";\n\nvar _regeneratorRuntime = require(\"@babel/runtime/regenerator\");\n\nvar _asyncToGenerator = require(\"@babel/runtime/helpers/asyncToGenerator\");\n\nvar signalR = require(\"@microsoft/signalr\");\n\nvar customerDashboardConnection = new signalR.HubConnectionBuilder().withUrl(\"http://localhost:7008/bookingsHub\").configureLogging(signalR.LogLevel.Information).build();\nvar salesDashboardConnection = new signalR.HubConnectionBuilder().withUrl(\"http://localhost:7008/salesHub\").configureLogging(signalR.LogLevel.Information).build();\ncustomerDashboardConnection.on(\"currentCustomerBookingsDashboardWithData\", function (model) {\n  console.log(\"Current customer bookings dashboard\");\n  console.log(model);\n});\nsalesDashboardConnection.on(\"currentTotalSalesByTrip\", function (model) {\n  console.log(\"Current total sales by trip\");\n  console.log(model);\n});\nsalesDashboardConnection.on(\"currentTotalSalesByVehicle\", function (model) {\n  console.log(\"Current total sales by vehicle\");\n  console.log(model);\n});\nsalesDashboardConnection.on(\"currentTotalSales\", function (model) {\n  console.log(\"Current total sales\");\n  console.log(model);\n});\nsalesDashboardConnection.on(\"currentSalesByTerminal\", function (model) {\n  console.log(\"Current sales by terminal\");\n  console.log(model);\n});\nsalesDashboardConnection.on(\"currentSalesByRoute\", function (model) {\n  console.log(\"Current sales by route\");\n  console.log(model);\n});\ncustomerDashboardConnection.onclose( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n  return _regeneratorRuntime.wrap(function _callee$(_context) {\n    while (1) {\n      switch (_context.prev = _context.next) {\n        case 0:\n          _context.next = 2;\n          return start();\n\n        case 2:\n        case \"end\":\n          return _context.stop();\n      }\n    }\n  }, _callee);\n})));\nsalesDashboardConnection.onclose( /*#__PURE__*/_asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2() {\n  return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n    while (1) {\n      switch (_context2.prev = _context2.next) {\n        case 0:\n          _context2.next = 2;\n          return start();\n\n        case 2:\n        case \"end\":\n          return _context2.stop();\n      }\n    }\n  }, _callee2);\n})));\n\nfunction startCustomerDashboardConnection() {\n  return _startCustomerDashboardConnection.apply(this, arguments);\n}\n\nfunction _startCustomerDashboardConnection() {\n  _startCustomerDashboardConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return customerDashboardConnection.start();\n\n          case 3:\n            console.log(\"connected to customer bookings dashboard\");\n            _context3.next = 10;\n            break;\n\n          case 6:\n            _context3.prev = 6;\n            _context3.t0 = _context3[\"catch\"](0);\n            console.log(_context3.t0);\n            setTimeout(function () {\n              return start();\n            }, 5000);\n\n          case 10:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 6]]);\n  }));\n  return _startCustomerDashboardConnection.apply(this, arguments);\n}\n\n;\n\nfunction startSalesDashboardConnection() {\n  return _startSalesDashboardConnection.apply(this, arguments);\n}\n\nfunction _startSalesDashboardConnection() {\n  _startSalesDashboardConnection = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4() {\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return salesDashboardConnection.start();\n\n          case 3:\n            console.log(\"connected to sales dashboard\");\n            _context4.next = 10;\n            break;\n\n          case 6:\n            _context4.prev = 6;\n            _context4.t0 = _context4[\"catch\"](0);\n            console.log(_context4.t0);\n            setTimeout(function () {\n              return start();\n            }, 5000);\n\n          case 10:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[0, 6]]);\n  }));\n  return _startSalesDashboardConnection.apply(this, arguments);\n}\n\n; // Start the connection.\n\nstartCustomerDashboardConnection();\nstartSalesDashboardConnection();","map":{"version":3,"sources":["C:/Users/Viktor/Desktop/Pazon/Bigtime-Project/hooks/live_dashboard_copy.js"],"names":["signalR","require","customerDashboardConnection","HubConnectionBuilder","withUrl","configureLogging","LogLevel","Information","build","salesDashboardConnection","on","model","console","log","onclose","start","startCustomerDashboardConnection","setTimeout","startSalesDashboardConnection"],"mappings":"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","sourcesContent":["\"use strict\";\r\nconst signalR = require(\"@microsoft/signalr\");\r\n\r\n\r\nvar customerDashboardConnection = new signalR\r\n    .HubConnectionBuilder()\r\n    .withUrl(\"http://localhost:7008/bookingsHub\")\r\n    .configureLogging(signalR.LogLevel.Information)\r\n    .build();\r\n\r\nvar salesDashboardConnection = new signalR\r\n    .HubConnectionBuilder()\r\n    .withUrl(\"http://localhost:7008/salesHub\")\r\n    .configureLogging(signalR.LogLevel.Information)\r\n    .build();\r\n\r\n\r\ncustomerDashboardConnection.on(\"currentCustomerBookingsDashboardWithData\", function (model) {\r\n    console.log(\"Current customer bookings dashboard\");\r\n    console.log(model);\r\n});\r\n\r\nsalesDashboardConnection.on(\"currentTotalSalesByTrip\", function (model) {\r\n    console.log(\"Current total sales by trip\");\r\n    console.log(model);\r\n});\r\n\r\nsalesDashboardConnection.on(\"currentTotalSalesByVehicle\", function (model) {\r\n    console.log(\"Current total sales by vehicle\");\r\n    console.log(model);\r\n});\r\n\r\nsalesDashboardConnection.on(\"currentTotalSales\", function (model) {\r\n    console.log(\"Current total sales\");\r\n    console.log(model);\r\n});\r\n\r\nsalesDashboardConnection.on(\"currentSalesByTerminal\", function (model) {\r\n    console.log(\"Current sales by terminal\");\r\n    console.log(model);\r\n});\r\n\r\nsalesDashboardConnection.on(\"currentSalesByRoute\", function (model) {\r\n    console.log(\"Current sales by route\");\r\n    console.log(model);\r\n});\r\n\r\ncustomerDashboardConnection.onclose(async () => {\r\n    await start();\r\n});\r\nsalesDashboardConnection.onclose(async () => {\r\n    await start();\r\n});\r\n\r\nasync function startCustomerDashboardConnection() {\r\n    try {\r\n        await customerDashboardConnection.start();\r\n        console.log(\"connected to customer bookings dashboard\");\r\n    } catch (err) {\r\n        console.log(err);\r\n        setTimeout(() => start(), 5000);\r\n    }\r\n};\r\n\r\nasync function startSalesDashboardConnection() {\r\n    try {\r\n        await salesDashboardConnection.start();\r\n        console.log(\"connected to sales dashboard\");\r\n    } catch (err) {\r\n        console.log(err);\r\n        setTimeout(() => start(), 5000);\r\n    }\r\n};\r\n\r\n// Start the connection.\r\nstartCustomerDashboardConnection();\r\nstartSalesDashboardConnection();"]},"metadata":{},"sourceType":"script"}